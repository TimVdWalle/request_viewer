<!doctype html>
<html lang="en">
<head>
  <title><%= content_for(:title) || "Request Viewer" %></title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= action_cable_meta_tag %>

  <%= yield :head %>

  <%# Enable PWA manifest for installable apps (enable matching routes if you use these) %>
  <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

  <link rel="icon" href="/icon.png" type="image/png">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icon.png">

  <%# In development, avoid data-turbo-track="reload" so hotwire-livereload can do its job %>
  <%= stylesheet_link_tag :app, "data-turbo-track": (Rails.env.production? ? "reload" : ""), media: "all" %>

  <%# Importmap (includes Turbo if you import it in application.js) %>
  <%= javascript_importmap_tags %>
</head>

<body class="font-inter antialiased bg-white text-gray-900 tracking-tight">

<!-- Page wrapper -->
<div class="flex flex-col min-h-screen overflow-hidden supports-[overflow:clip]:overflow-clip">

  <!-- Site header -->
  <header class="fixed w-full z-30 md:bg-opacity-90 transition duration-300 ease-in-out"
          x-data="handleHeader" @scroll.window="isTop" :class="{ 'bg-white backdrop-blur-sm shadow-lg' : !top }">

    <div class="max-w-6xl mx-auto px-5 sm:px-6">
      <div class="flex items-center justify-between h-16 md:h-20">

        <!-- Site branding -->
        <div class="shrink-0 mr-4">
          <!-- Logo -->
          <%= link_to root_path, class: "block", "aria-label": "Request Viewer" do %>
            <svg class="w-8 h-8" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient cx="21.152%" cy="86.063%" fx="21.152%" fy="86.063%" r="79.941%" id="header-logo">
                  <stop stop-color="#4FD1C5" offset="0%" />
                  <stop stop-color="#81E6D9" offset="25.871%" />
                  <stop stop-color="#338CF5" offset="100%" />
                </radialGradient>
              </defs>
              <rect width="32" height="32" rx="16" fill="url(#header-logo)" fill-rule="nonzero" />
            </svg>
          <% end %>
        </div>

        <!-- Desktop navigation -->
        <nav class="hidden md:flex md:grow">
          <!-- Desktop menu links -->
          <ul class="flex grow justify-end flex-wrap items-center">
            <li>
              <%= link_to "Home",
                          root_path,
                          class: "text-gray-600 hover:text-gray-900 px-3 lg:px-5 py-2 flex items-center transition duration-150 ease-in-out" %>
            </li>
            <li>
              <%# Go straight to the New Bin form %>
              <%= link_to "Bins",
                          new_bin_path,
                          class: "text-gray-600 hover:text-gray-900 px-3 lg:px-5 py-2 flex items-center transition duration-150 ease-in-out" %>
            </li>
          </ul>

          <!-- Desktop sign in links (empty for MVP) -->
          <ul class="flex grow justify-end flex-wrap items-center"></ul>
        </nav>

        <!-- Mobile menu -->
        <div class="flex md:hidden" x-data="{ expanded: false }">
          <!-- Hamburger button -->
          <button
            class="hamburger"
            :class="{ 'active': expanded }"
            @click.stop="expanded = !expanded"
            aria-controls="mobile-nav"
            :aria-expanded="expanded">
            <span class="sr-only">Menu</span>
            <svg class="w-6 h-6 fill-current text-gray-900" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <rect y="4" width="24" height="2" />
              <rect y="11" width="24" height="2" />
              <rect y="18" width="24" height="2" />
            </svg>
          </button>

          <!-- Mobile navigation -->
          <nav id="mobile-nav"
               class="absolute top-full h-screen pb-16 z-20 left-0 w-full overflow-scroll bg-white"
               @click.outside="expanded = false"
               @keydown.escape.window="expanded = false"
               x-show="expanded"
               x-transition:enter="transition ease-out duration-200 transform"
               x-transition:enter-start="opacity-0 -translate-y-2"
               x-transition:enter-end="opacity-100 translate-y-0"
               x-transition:leave="transition ease-out duration-200"
               x-transition:leave-start="opacity-100"
               x-transition:leave-end="opacity-0"
               x-cloak>
            <ul class="px-5 py-2">
              <li class="py-2">
                <%= link_to "Home",
                            root_path,
                            class: "text-gray-900 px-3 py-2 inline-block" %>
              </li>
              <li class="py-2">
                <%= link_to "Bins",
                            new_bin_path,
                            class: "text-gray-900 px-3 py-2 inline-block" %>
              </li>
            </ul>
          </nav>
        </div>

      </div>
    </div>
  </header>

  <!-- Page content -->
  <main class="grow">
    <section class="relative">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="pt-32 pb-12 md:pt-40 md:pb-20">
          <%= yield %>
        </div>
      </div>
    </section>
  </main>

  <!-- Site footer -->
  <footer>
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <!-- Bottom area -->
      <div class="md:flex md:items-center md:justify-between py-4 md:py-8 border-t border-gray-200">
        <div class="text-sm text-gray-600 mr-4">Proudly capturing requests since 2025</div>
      </div>
    </div>
  </footer>

</div>

</body>
</html>
